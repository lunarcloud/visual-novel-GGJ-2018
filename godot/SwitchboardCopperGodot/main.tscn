[gd_scene load_steps=16 format=2]

[ext_resource path="res://StoryManager.gd" type="Script" id=1]
[ext_resource path="res://InkRuntimeManager.gd" type="Script" id=2]
[ext_resource path="res://fonts/Cavalcade/Cavalcade-Regular.ttf" type="DynamicFontData" id=3]
[ext_resource path="res://media/side-cursor.png" type="Texture" id=4]
[ext_resource path="res://media/portrait/francis.png" type="Texture" id=5]
[ext_resource path="res://media/portrait/note.png" type="Texture" id=6]
[ext_resource path="res://media/portrait/shadow.png" type="Texture" id=7]
[ext_resource path="res://media/portrait/telegraph.png" type="Texture" id=8]

[sub_resource type="DynamicFont" id=6]
size = 80
use_filter = true
font_data = ExtResource( 3 )

[sub_resource type="DynamicFont" id=3]
size = 24
use_filter = true
font_data = ExtResource( 3 )

[sub_resource type="ImageTexture" id=1]

[sub_resource type="StyleBoxFlat" id=8]
content_margin_left = 4.0
content_margin_right = 4.0
content_margin_top = 4.0
content_margin_bottom = 6.0
bg_color = Color( 0.203922, 0.117647, 0.0352941, 1 )
border_width_left = 2
border_width_top = 2
border_width_right = 2
border_width_bottom = 2
border_color = Color( 0.607843, 0.4, 0.2, 1 )
corner_radius_top_left = 10
corner_radius_top_right = 10
corner_radius_bottom_right = 10
corner_radius_bottom_left = 10
expand_margin_left = 2.0
expand_margin_right = 2.0
expand_margin_top = 4.0
expand_margin_bottom = 4.0

[sub_resource type="DynamicFont" id=7]
size = 24
use_filter = true
font_data = ExtResource( 3 )

[sub_resource type="DynamicFont" id=4]
size = 24
use_filter = true
font_data = ExtResource( 3 )

[sub_resource type="ButtonGroup" id=5]

[node name="Main" type="Node2D"]

[node name="StoryManager" type="Node2D" parent="."]
script = ExtResource( 1 )

[node name="InkRuntimeManager" type="Node" parent="StoryManager"]
script = ExtResource( 2 )

[node name="MusicPlayer" type="AudioStreamPlayer2D" parent="StoryManager"]

[node name="TitleContainer" type="CanvasLayer" parent="StoryManager"]

[node name="Title" type="ColorRect" parent="StoryManager/TitleContainer"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
color = Color( 0, 0, 0, 1 )

[node name="TitleText" type="Label" parent="StoryManager/TitleContainer/Title"]
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3
size_flags_stretch_ratio = 0.0
custom_fonts/font = SubResource( 6 )
text = "Title"
align = 1
valign = 1
autowrap = true

[node name="ContinueButton2" type="Button" parent="StoryManager/TitleContainer/Title"]
margin_left = 1235.0
margin_top = 679.0
margin_right = 1289.0
margin_bottom = 727.0
size_flags_horizontal = 10
size_flags_vertical = 10
custom_fonts/font = SubResource( 3 )
icon = ExtResource( 4 )
flat = true
align = 2

[node name="Background" type="TextureRect" parent="StoryManager"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_right = 1280.0
margin_bottom = 720.0
texture = SubResource( 1 )
stretch_mode = 7

[node name="Portraits" type="Node2D" parent="StoryManager"]
editor/display_folded = true

[node name="francis" type="TextureRect" parent="StoryManager/Portraits"]
visible = false
margin_left = 31.2857
margin_top = -10.1257
margin_right = 671.286
margin_bottom = 709.874
texture = ExtResource( 5 )

[node name="note" type="TextureRect" parent="StoryManager/Portraits"]
visible = false
margin_left = 31.2857
margin_top = -10.1257
margin_right = 671.286
margin_bottom = 709.874
texture = ExtResource( 6 )

[node name="shadow" type="TextureRect" parent="StoryManager/Portraits"]
visible = false
margin_left = 31.2857
margin_top = -10.1257
margin_right = 671.286
margin_bottom = 709.874
texture = ExtResource( 7 )

[node name="telegraph" type="TextureRect" parent="StoryManager/Portraits"]
visible = false
margin_left = 10.2857
margin_top = -19.1257
margin_right = 650.286
margin_bottom = 700.874
texture = ExtResource( 8 )

[node name="TextCanvas" type="CanvasLayer" parent="StoryManager"]

[node name="TextPanel" type="PanelContainer" parent="StoryManager/TextCanvas"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 80.0
margin_top = 620.0
margin_right = -80.0
margin_bottom = -10.0
grow_horizontal = 2
grow_vertical = 0
rect_min_size = Vector2( 1120, 80 )
size_flags_vertical = 11
custom_styles/panel = SubResource( 8 )

[node name="Vert" type="VBoxContainer" parent="StoryManager/TextCanvas/TextPanel"]
margin_left = 4.0
margin_top = 4.0
margin_right = 1124.0
margin_bottom = 84.0
grow_horizontal = 2
grow_vertical = 0
size_flags_horizontal = 3
size_flags_vertical = 11
custom_constants/separation = 2

[node name="StoryText" type="Label" parent="StoryManager/TextCanvas/TextPanel/Vert"]
margin_right = 1120.0
margin_bottom = 48.0
grow_horizontal = 2
rect_min_size = Vector2( 1120, 0 )
size_flags_vertical = 11
custom_fonts/font = SubResource( 7 )
text = "story not loaded"
align = 1
valign = 1
autowrap = true

[node name="ContinueButton" type="Button" parent="StoryManager/TextCanvas/TextPanel/Vert"]
margin_left = 1084.0
margin_top = 50.0
margin_right = 1120.0
margin_bottom = 80.0
size_flags_horizontal = 8
size_flags_vertical = 0
icon = ExtResource( 4 )
flat = true

[node name="ChoicesContainer" type="VBoxContainer" parent="StoryManager/TextCanvas/TextPanel/Vert"]
visible = false
margin_left = 521.0
margin_top = 81.0
margin_right = 599.0
margin_bottom = 311.0
size_flags_horizontal = 6
size_flags_vertical = 6

[node name="Choice1" type="Button" parent="StoryManager/TextCanvas/TextPanel/Vert/ChoicesContainer"]
margin_right = 78.0
margin_bottom = 35.0
custom_fonts/font = SubResource( 4 )
group = SubResource( 5 )
text = "Choice"
flat = true

[node name="Choice2" type="Button" parent="StoryManager/TextCanvas/TextPanel/Vert/ChoicesContainer"]
margin_top = 39.0
margin_right = 78.0
margin_bottom = 74.0
custom_fonts/font = SubResource( 4 )
group = SubResource( 5 )
text = "Choice"
flat = true

[node name="Choice3" type="Button" parent="StoryManager/TextCanvas/TextPanel/Vert/ChoicesContainer"]
margin_top = 78.0
margin_right = 78.0
margin_bottom = 113.0
custom_fonts/font = SubResource( 4 )
group = SubResource( 5 )
text = "Choice"
flat = true

[node name="Choice4" type="Button" parent="StoryManager/TextCanvas/TextPanel/Vert/ChoicesContainer"]
margin_top = 117.0
margin_right = 78.0
margin_bottom = 152.0
custom_fonts/font = SubResource( 4 )
group = SubResource( 5 )
text = "Choice"
flat = true

[node name="Choice5" type="Button" parent="StoryManager/TextCanvas/TextPanel/Vert/ChoicesContainer"]
margin_top = 156.0
margin_right = 78.0
margin_bottom = 191.0
custom_fonts/font = SubResource( 4 )
group = SubResource( 5 )
text = "Choice"
flat = true

[node name="Choice6" type="Button" parent="StoryManager/TextCanvas/TextPanel/Vert/ChoicesContainer"]
margin_top = 195.0
margin_right = 78.0
margin_bottom = 230.0
custom_fonts/font = SubResource( 4 )
group = SubResource( 5 )
text = "Choice"
flat = true
